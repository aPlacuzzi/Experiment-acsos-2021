variables:
#  random: &random
#    min: 0
#    max: 29
#    step: 1
#    default: 2
  range: &range
    formula: 350
    language: scala
  aprange: &aprange
    formula: 1000
    language: scala
  accessPointName: &accessPointMoleculeName
    formula: "\"accessPoint\""
  moveFrequency: &moveFrequency
    formula: 1/20
    language: scala
  retentionTime: &retentionTime
    formula: Math.min(30.0, 50.0)
    language: scala

export:
  - time

seeds:
  scenario: 0 #*random
  simulation: 0 #*random

incarnation: scafi

_ReproduceGPSTrace: &ReproduceGPSTrace
  type: ReproduceGPSTrace
  parameters: ["vcmuser.gpx", false, AlignToTime, 1365922800, false, false]

environment:
  type: OSMEnvironment
  parameters: ["vcm.pbf", false]

network-model:
  type: CustomConnectViaAccessPoint #ConnectWithinDistance #*connectionType
  parameters: [*range, *aprange, *accessPointMoleculeName]

_pools:
  - pool: &program
      - time-distribution: 1
        type: Event
        actions:
          - type: RunScafiProgram
            parameters: ["it.unibo.casestudy.GradientWithCrowd", *retentionTime]
      - program: send
  - pool: &move
      - time-distribution: 0.1
        type: Event
        actions:
          - *ReproduceGPSTrace

deployments:
  - type: FromGPSTrace
    parameters: [ 1497, "vcmuser.gpx", false, AlignToTime, 1365922800, false, false ] #1497
    programs:
      - *move
      - *program
    contents:
      - molecule: range
        concentration: *range
      - molecule: human
        concentration: true
      - molecule: *accessPointMoleculeName
        concentration: false
      - molecule: isSource
        concentration: false
      - molecule: isDestination
        concentration: false
  - type: Grid
    parameters: [ 48.182, 16.308, 48.2270, 16.423, 0.0055, 0.0055 ]
    programs:
      - *program
    contents:
      - molecule: range
        concentration: *range
      - molecule: human
        concentration: false
      - molecule: *accessPointMoleculeName
        concentration: true
      - molecule: isSource
        concentration: false
      - molecule: isDestination
        concentration: false
  - type: Point
    parameters: [48.205933, 16.3419]
    programs:
      - *program
    contents:
      - molecule: range
        concentration: *range
      - molecule: human
        concentration: true
      - molecule: *accessPointMoleculeName
        concentration: false
      - molecule: isSource
        concentration: true
      - molecule: isDestination
        concentration: false
#  - type: Point
#    parameters: [ 48.210255, 16.377142 ]
#    programs:
#      - *program
#    contents:
#      - molecule: range
#        concentration: *aprange
#      - molecule: human
#        concentration: false
#      - molecule: *accessPointMoleculeName
#        concentration: true
#      - molecule: isSource
#        concentration: false
#      - molecule: isDestination
#        concentration: true